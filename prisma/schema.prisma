// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Client {
  CPF          String      @id @unique @default(cuid())
  Name         String
  email        String      @unique
  Password     String
  cellNumber   String
  dateBirth    String
  cheduled     Scheduled[]
  scheduledoId String?
  Address      Address?    @relation(fields: [AddressCep], references: [cep])
  AddressCep   String?
}

model Provider {
  CNPJ       String @id @unique @default(cuid())
  Name       String
  email      String @unique
  Password   String
  img        String
  cellNumber String

  Service     Service[]
  ScheduleDay ScheduleDay[]
  Address     Address?      @relation(fields: [AddressCep], references: [cep])
  AddressCep  String?
}

model Service {
  id          String @id @unique @default(cuid())
  NameService String
  price       String
  description String
  img         String

  Category     Category[]
  Provider     Provider?  @relation(fields: [ProviderCNPJ], references: [CNPJ])
  ProviderCNPJ String?
}

model Category {
  id           String    @id @unique @default(cuid())
  NameCategory String    @unique
  description  String
  Service      Service?  @relation(fields: [ServiceId], references: [id])
  ServiceId    String?
  Products     Products? @relation(fields: [ProductsId], references: [id])
  ProductsId   String?
}

model ScheduleDay {
  id          String         @id @unique @default(cuid())
  day         String
  hour        ScheduleHour[]
  scheduled   Scheduled?     @relation(fields: [scheduledId], references: [id])
  scheduledId String?
  Provider    Provider[]
  ServiceId   String?
}

model ScheduleHour {
  id   String @id @unique @default(cuid())
  hour String @unique

  scheduleId String?

  scheduled   Scheduled?    @relation(fields: [scheduleId], references: [id])
  ScheduleDay ScheduleDay[]
}

model ScheduleStatus {
  id          String @id @unique @default(cuid())
  Name        String @unique
  description String

  scheduled   Scheduled? @relation(fields: [scheduledId], references: [id])
  scheduledId String?
}

model Scheduled {
  id     String           @id @unique @default(cuid())
  status ScheduleStatus[]

  schedule     ScheduleDay[]
  ScheduleHour ScheduleHour[]
  Client       Client?        @relation(fields: [ClientCPF], references: [CPF])
  ClientCPF    String?
}

model Products {
  id          String @id @unique @default(cuid())
  Name        String
  price       String
  description String
  img         String

  Category Category[]
}

model Address {
  cep    String @id @default(cuid())
  number String

  Provider Provider[]

  Client Client[]
}
